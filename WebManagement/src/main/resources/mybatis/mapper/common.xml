<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "mybatis-3-mapper.dtd">

<mapper namespace="com.mrc.db.mapper.CommonMapper">
	<select id="getList"
		parameterType="com.mrc.db.dto.common_cond"
		resultType="com.mrc.db.dto.t_common">
		select *
		from t_common
		<where>
			<if test="code != null ">
				and code LIKE #{code}
			</if>
			<if test="main_code != null and main_code != '' ">
				and main_code = #{main_code}
			</if>
			<if test="order_seq != null and order_seq != '' ">
				and order_seq = #{order_seq}
			</if>
			<if test="name != null and name != '' ">
				and name LIKE CONCAT('%', #{name}, '%')
			</if>
			<if test="addCond != null and addCond != '' ">
				${addCond}
			</if>
			<if test="hide != null  ">
				and hide = #{hide}
			</if>
		</where>
	</select>

	<insert id="commonSave" parameterType="com.mrc.db.dto.t_common" >
		INSERT INTO t_common
		(main_code, name, order_seq, ref_data1, ref_data2, ref_data3, ref_data4, hide, insert_code, insert_date, update_code, update_date)
		values(  #{main_code}, #{name}, #{order_seq}, #{ref_data1}, #{ref_data2}, #{ref_data3}, #{ref_data4}, #{hide},  #{update_code},  #{update_date}, #{update_code}, localtime())
		 ON DUPLICATE KEY UPDATE 
		    main_code   = #{main_code}
		  , order_seq   = #{order_seq}
		  , ref_data1   = #{ref_data1}
		  , ref_data2   = #{ref_data2}
		  , ref_data3   = #{ref_data3}
		  , ref_data4   = #{ref_data4}
		  , hide        = #{hide}
		  , update_code = #{update_code}
		  , update_date = localtime();
	</insert>



	<delete id="remove" parameterType="com.mrc.db.dto.t_common">
		delete from t_common
		<where>
			<if test="code != null ">
				and code like #{code}
			</if>
			<if test="main_code != null and main_code != '' ">
				and main_code = #{main_code}
			</if>
		</where>
   </delete>



	<update id="update" parameterType="com.mrc.db.dto.t_common">

		update T_common
         set main_code   = #{main_code}
		  , order_seq   = #{order_seq}
		  , ref_data1   = #{ref_data1}
		  , ref_data2   = #{ref_data2}
		  , ref_data3   = #{ref_data3}
		  , ref_data4   = #{ref_data4}
		  , hide        = #{hide}
		  , update_code = #{update_code}
		  , update_date = localtime();

		where code = #{code}

	</update>


</mapper>